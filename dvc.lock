schema: '2.0'
stages:
  data_preprocess:
    cmd: python src/data_preprocess.py --params params.yaml
    deps:
    - path: data/external/images
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/external/stats/pokemon-gen-1-8.csv
      md5: b0b029c2dc01bd0e6f2dbf9eeae8c14e
      size: 160616
    - path: src/data_preprocess.py
      md5: 173aee5076a9ad7a034e9b84ae915dc4
      size: 3184
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Bug
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
    outs:
    - path: data/processed/pokemon
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/processed/pokemon-with-image-paths.csv
      md5: 17e1d3f1a10d25970f4351de89ddd220
      size: 107124
    - path: data/processed/pokemon.csv
      md5: ddfc4d225790b12fbd9ed8b0d667406c
      size: 47039
  data_load:
    cmd: python src/data_load.py --params params.yaml
    deps:
    - path: data/processed/pokemon
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/processed/pokemon-with-image-paths.csv
      md5: 17e1d3f1a10d25970f4351de89ddd220
      size: 107124
    - path: src/data_load.py
      md5: a673d8a4ae2942db2fe5df8aa9b1400b
      size: 2148
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Bug
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
    outs:
    - path: data/processed/X.pckl
      md5: 8f6555c6159e27739fd97a61ace395a4
      size: 2891610169
    - path: data/processed/X_test.pckl
      md5: 98948253c7ac01bb980a44f566a2f1aa
      size: 581210168
    - path: data/processed/X_train.pckl
      md5: 7c8523405923e481173f822ca2d44b4a
      size: 2310400169
    - path: data/processed/y.pckl
      md5: 685221d813697fe4997f5ba144d78874
      size: 7070
    - path: data/processed/y_test.pckl
      md5: 1763424de90f2e88756b520db84ba6d8
      size: 3245
    - path: data/processed/y_train.pckl
      md5: 0ab4894cecbc521fd65935555ece14c9
      size: 10911
  train:
    cmd: python src/train.py --params params.yaml
    deps:
    - path: data/processed/X_test.pckl
      md5: 98948253c7ac01bb980a44f566a2f1aa
      size: 581210168
    - path: data/processed/X_train.pckl
      md5: 7c8523405923e481173f822ca2d44b4a
      size: 2310400169
    - path: data/processed/y_test.pckl
      md5: 1763424de90f2e88756b520db84ba6d8
      size: 3245
    - path: data/processed/y_train.pckl
      md5: 0ab4894cecbc521fd65935555ece14c9
      size: 10911
    - path: src/train.py
      md5: 2e27bad38686ee3ea9fe60eec0983c94
      size: 4339
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Bug
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
        train:
          test_size: 0.2
          learning_rate: 0.05
          epochs: 10
          batch_size: 20
    outs:
    - path: outputs/model/saved_model.pb
      md5: d54569a0a0c5827f87f307b97e26e773
      size: 194486
    - path: outputs/train_history.png
      md5: fe7d830253afbb4fdc081297f96e5079
      size: 31048
  evaluate:
    cmd: python src/evaluate.py --params params.yaml
    deps:
    - path: outputs/model/keras_metadata.pb
      md5: deedfd296f79a4cd7e3ed78450e75376
      size: 17309
    - path: outputs/model/saved_model.pb
      md5: d54569a0a0c5827f87f307b97e26e773
      size: 194486
    - path: outputs/train_history.png
      md5: fe7d830253afbb4fdc081297f96e5079
      size: 31048
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Bug
    outs:
    - path: outputs/confusion_matrix.png
      md5: a241c1ac4bb2ff658d2f6b7e8f5fb1c5
      size: 23036
    - path: outputs/metrics.yaml
      md5: ce6e32cfa0b866999f4f567427ce6e46
      size: 92
